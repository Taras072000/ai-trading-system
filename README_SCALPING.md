# 🚀 Peper Binance v4 - Гибридная Скальпинг Система

## 🎯 Описание

Единая гибридная система для скальпинга с быстрым достижением минимального профита с учётом комиссий биржи Binance. Четыре AI модели работают в команде, каждая анализирует информацию, в которой она сильнее всех, чтобы совместно прогнозировать фазу рынка и давать советы по открытию сделок.

## 🤖 AI Команда

### 1. LGBM Specialist (Технический анализ)
- **Специализация**: RSI, MACD, Bollinger Bands, Volume
- **Валютные пары**: BTCUSDT, ETHUSDT
- **Таймфреймы**: 1m, 5m
- **Цель**: Точные точки входа/выхода

### 2. Lava Model (Паттерны и тренды)
- **Специализация**: Candlestick patterns, Support/Resistance
- **Валютные пары**: BNBUSDT, ADAUSDT
- **Таймфреймы**: 1m, 3m
- **Цель**: Определение разворотных точек

### 3. Mistral AI (Фундаментальный анализ)
- **Специализация**: News sentiment, Market events
- **Валютные пары**: Все основные
- **Таймфреймы**: Real-time
- **Цель**: Макро-тренды и риски

### 4. Trading AI (Риск-менеджмент)
- **Специализация**: Position sizing, Stop-loss optimization
- **Валютные пары**: Все
- **Таймфреймы**: Multi-timeframe
- **Цель**: Защита капитала

## 📊 Целевые Показатели

- **Винрейт**: 75%+
- **Минимальная прибыль**: 2-5 пипсов после комиссий
- **Максимальный риск**: 1% на сделку
- **Комиссии Binance**: 0.1% (учитываются автоматически)

## 🏗️ Архитектура Системы

```
┌─────────────────────────────────────────────────────────────┐
│                    ScalpingEnsembleSystem                   │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │   LGBM AI   │  │  Lava AI    │  │ Mistral AI  │         │
│  │ Technical   │  │ Patterns    │  │ Sentiment   │         │
│  │ Analysis    │  │ & Trends    │  │ Analysis    │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│                           │                                 │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │              Trading AI (Risk Management)               │ │
│  └─────────────────────────────────────────────────────────┘ │
│                           │                                 │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │            Market Phase Detection Engine                │ │
│  │         (Trending/Ranging/Volatile/Consolidation)       │ │
│  └─────────────────────────────────────────────────────────┘ │
│                           │                                 │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │              Signal Generation & Consensus              │ │
│  │           (BUY/SELL/HOLD with confidence)               │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 📁 Структура Файлов

```
Peper Binance v4/
├── scalping_ensemble_system.py    # Основная система ансамбля
├── scalping_config.json          # Конфигурация системы
├── run_scalping_system.py        # Скрипт запуска
├── run_ensemble_training.py      # Обучение моделей
└── README_SCALPING.md            # Эта документация
```

## 🚀 Быстрый Старт

### 1. Установка зависимостей

```bash
pip install pandas numpy scikit-learn lightgbm asyncio aiohttp
```

### 2. Настройка конфигурации

Отредактируйте `scalping_config.json` под ваши параметры:

```json
{
  "trading_parameters": {
    "min_profit_pips": 2.0,
    "max_trades_per_hour": 10,
    "target_winrate": 0.75
  },
  "exchange_settings": {
    "commission_rate": 0.001,
    "slippage_pips": 0.5
  }
}
```

### 3. Запуск системы

```bash
python run_scalping_system.py
```

## 🎮 Режимы Работы

### 1. 🔴 Живая Торговля (Симуляция)
```bash
# Выберите опцию 1 в меню
# Укажите символы и время торговли
```

### 2. 📊 Бэктест Системы
```bash
# Выберите опцию 2 в меню
# Укажите символ и период для тестирования
```

### 3. 🧪 Быстрый Тест Сигналов
```bash
# Выберите опцию 3 в меню
# Получите текущие сигналы по основным парам
```

## 📈 Примеры Использования

### Генерация Сигнала

```python
from scalping_ensemble_system import ScalpingEnsembleSystem

system = ScalpingEnsembleSystem()
signal = await system.generate_scalping_signal("BTCUSDT", "1m")

if signal:
    print(f"Действие: {signal.action}")
    print(f"Уверенность: {signal.confidence:.1%}")
    print(f"Ожидаемая прибыль: {signal.expected_profit_after_fees:.2f} пипсов")
```

### Определение Фазы Рынка

```python
phase = await system.detect_market_phase("ETHUSDT", "1m")
print(f"Фаза рынка: {phase.value}")
```

### Бэктест

```python
results = await system.backtest_scalping_system("BTCUSDT", days=7)
print(f"Винрейт: {results['winrate']:.1%}")
print(f"Общая доходность: {results['total_return']:.1%}")
```

## ⚙️ Настройки Системы

### Торговые Параметры

- **min_profit_pips**: Минимальная прибыль в пипсах (по умолчанию: 2.0)
- **max_trades_per_hour**: Максимум сделок в час (по умолчанию: 10)
- **max_trades_per_day**: Максимум сделок в день (по умолчанию: 100)

### Риск-Менеджмент

- **stop_loss_pips**: Стоп-лосс в пипсах (по умолчанию: 5.0)
- **take_profit_pips**: Тейк-профит в пипсах (по умолчанию: 3.0)
- **max_daily_loss_pct**: Максимальные дневные потери (по умолчанию: 2%)

### AI Модели

- **confidence_threshold**: Минимальная уверенность для сигнала (по умолчанию: 0.7)
- **consensus_threshold**: Порог консенсуса AI (по умолчанию: 0.6)

## 📊 Мониторинг и Статистика

Система автоматически ведет статистику:

- ✅ Количество прибыльных сделок
- ❌ Количество убыточных сделок
- 📈 Общий винрейт
- 💰 Прибыль в пипсах
- 💸 Учет комиссий
- ⏱️ Время выполнения сделок

## 🔧 Оптимизация

### Для Повышения Винрейта

1. Увеличьте `confidence_threshold` до 0.8+
2. Добавьте фильтры по волатильности
3. Используйте только сильные сигналы консенсуса

### Для Увеличения Прибыли

1. Оптимизируйте `take_profit_pips`
2. Настройте динамический стоп-лосс
3. Добавьте trailing stop

### Для Снижения Рисков

1. Уменьшите `max_trades_per_hour`
2. Увеличьте `stop_loss_pips`
3. Добавьте фильтры по времени торговли

## ⚠️ Важные Замечания

1. **Комиссии**: Система автоматически учитывает комиссии Binance (0.1%)
2. **Слипедж**: Учитывается проскальзывание цены при исполнении
3. **Риски**: Никогда не рискуйте больше, чем можете позволить себе потерять
4. **Тестирование**: Всегда тестируйте на исторических данных перед живой торговлей

## 🎯 Цели Системы

- **Краткосрочная**: Стабильный винрейт 75%+
- **Среднесрочная**: Прибыль 50+ пипсов в день
- **Долгосрочная**: Устойчивая доходность с минимальными просадками

## 🤝 Поддержка

Для вопросов и предложений по улучшению системы создавайте issues или обращайтесь к разработчикам.

---

**🚀 Peper Binance v4 - Где AI встречается с прибылью!** 💰